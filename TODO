TODO
====

BEFORE UPLOADING THE TREE
-------------------------

Fix the copyright in the [ch] files (year and license text.)

Move the slave GPU access to hikaru-gpu.c. Proper support may require the
introduction of a new vk_device_accessors_t class.

Convert VK_*_{LOG,ERROR} from macros to functions; and add the DEVICE
variants.

Rewrite the JSON file to be more flexible (just like MAME.) Move its location
to '$HOME/.local/share/valkyrie' or something. Create that directory on
`make install'.

Convert TEXRAM and CMDRAM from vk_buffer_t's to simple byte arrays.

HIKARU
------

Save state support. This is mandatory.

Implement better AICA support (especially the RTC and IRQs.)

Implement better MIE support (that is, wrap a Z80 emulator in a
vk_cpu : z80 class and tape it in the code.)

Implement the three EEPROMs (MAINBD, ROMBD, MIE.)

SH4
---

Check FPU emulation.

Implement simple per-basic-block LLVM translation. This should make debugging
a lot more bearable.

RENDERING
---------

Fix text texturing in the BOOTROM menu. This will require rewriting the
tri-strip triangulation code.

Figure out how to render 3D. This requires (in order of importance):

- Figure out how the projection matrix is specified. SGNASCAR includes text
  talking about 'window stacking'. Is that related in any way?

- Figure out how the fade-in effect is done in the intro screen.

- Implement proper texture caching, for both textures (TEXRAM) and layers
  (FB).

- Implement proper model caching using VBOs.

AIRTRIX
-------

Reaches the title screen, but apparently uploads garbage to CMDRAM.

Note that one MASKROM doesn't pass the ROMBD test (all the other MASKROMs do.)

BRAVEFF
-------

Missing MASKROMs. Won't work. It works enough to display the intro screen
and the game test menu though. 

Cyber Troops Virtual On 4
-------------------------

Not dumped yet.

PHARRIER
--------

Reaches the title screen, but the renderer can't draw any 3D on screen yet.

Render the 3D intro screen using the youtube footage as a reference. Figure
out why the 161 commands contain garbage info.

PODRACE
-------

Missing MASKROMS. Won't work. Useful to test MASKROM shrinkage tho (the
second problem SGNASCAR has.)

SGNASCAR
--------

For some reason the ROM->RAM transfer table at EPROM offset +390 tells
the BOOTROM to read 01FF0000 bytes from the ROM aperture at 03xxxxxx.
The problem is that the aperture is only 16MB wide, so the BOOTROM ends
up reading garbage from the 04xxxxxx MEMCTL device.

Note that MASKROMs are not mapped correctly: contrarily to AIRTRIX and
PHARRIER the CRCs computed by the ROMBD test menu are wrong. However, the
MASKROMs are not even looked at by the crashy code... So the issue is with
EPROM. The ROM copy loop should not fail. Somehow.
